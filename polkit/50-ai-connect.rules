// PolicyKit Regel für AI-Connect Services
// Erlaubt User 'mp' und 'www-data' (Apache/PHP) die Steuerung von AI-Connect ohne sudo
//
// Installation:
//   sudo cp /home/mp/Projekte/AI-Connect/polkit/50-ai-connect.rules /etc/polkit-1/rules.d/
//   sudo chmod 644 /etc/polkit-1/rules.d/50-ai-connect.rules
//
// Nach Änderungen: systemctl restart polkit

polkit.addRule(function(action, subject) {
    if (action.id == "org.freedesktop.systemd1.manage-units" &&
        (subject.user == "mp" || subject.user == "www-data") &&
        (action.lookup("unit") == "ai-connect.service" ||
         action.lookup("unit") == "ai-connect-mcp.service")) {
        return polkit.Result.YES;
    }
});
